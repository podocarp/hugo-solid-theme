<script src='/js/alwaysload.js'></script>

{{ if .Params.useFL }}
<script src="//code.jquery.com/jquery-latest.js"></script>
<script
    src="//cdn.jsdelivr.net/npm/featherlight@1.7.14/release/featherlight.min.js"
    type="text/javascript" charset="utf-8">
</script>

<script src='/js/lazyload.js'></script>

    {{ if .Params.useFLGallery }}
    <script
        src="//cdn.rawgit.com/noelboss/featherlight/1.7.13/release/featherlight.gallery.min.js"
        type="text/javascript" charset="utf-8">
    </script>
    <script>
        $(document).ready(function () {
                $('.gallerywrapper').each(function(_i,gal){
                    $(gal).featherlightGallery({
                            previousIcon: '&#9664;',
                            nextIcon: '&#9654;',
                            filter: '.gallery',
                            loading: 'Loading nice picture...',
                    });
                });
        });
        $.featherlightGallery.prototype.onResize = function () {
            var caption = this.$currentTarget.find('img').attr('alt');
            var width = this.$content["0"].width;
            var height = this.$content["0"].height;
            if (height>width){
                width *=2;
            }
            this.$instance.find('figcaption').remove();
            $('<figcaption>').css("max-width",width).html(caption).appendTo(this.$instance.find('.featherlight-content'));
        };
    </script>
    {{ end }}
{{ end }}

{{ if .Params.useVideoJS }}
<script src="//vjs.zencdn.net/7.3.0/video.min.js"></script>
{{ end }}

{{ if .Params.mathjax }}
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
          tex2jax: {
            processEscapes: true,
            processEnvironments: true,
            skipTags: ['script', 'noscript', 'style', 'pre'],
            TeX: {
                extensions: ["AMSmath.js", "AMSsymbols.js"]
            }
          }
        });
</script>
{{ end }}

{{ if .Params.katex }}
    <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css"
    integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET"
    crossorigin="anonymous">

    <script defer
        src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js"
        integrity="sha384-GxNFqL3r9uRJQhR+47eDxuPoNE7yLftQM8LcxzgS4HT73tp970WS/wV5p8UzCOmb"
    crossorigin="anonymous"></script>

    <script defer
        src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/auto-render.min.js"
        integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl"
        crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
              delimiters: [
                  {left: '$$', right: '$$', display: true},
                  {left: '$', right: '$', display: false},
                  {left: '\\(', right: '\\)', display: false},
                  {left: '\\[', right: '\\]', display: true}
              ],
            });
        });
    </script>
{{ end }}
